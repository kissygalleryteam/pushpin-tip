/*!build time : 2014-05-06 6:17:03 PM*/
KISSY.add("gallery/pushpin-tip/1.0/index",function(a,b){function c(){this._init.apply(this,arguments)}var d=b.all,e={closable:!0,scrollable:!1,elcls:"ks-pushpin",tips:[]},f={cls:"",node:null,offset:[0,0],text:""},g='<div class="{elcls} {cls}" style="position:absolute;"><a href="javascript:{}" class="ks-pushpin-close">close</a><div class="ks-pushpin-text">{text}</div></div>';return a.augment(c,a.EventTarget,{_init:function(b){this.cfg=a.merge(e,b||{}),this.pops=[],this.cfg.tips.length>0&&this._createHTML(this.cfg.tips)},_createHTML:function(b){var c=this,e=d(document.createDocumentFragment());a.each(b,function(b){var h=a.merge(f,b);if(h.node){var i=a.substitute(g,{elcls:c.cfg.elcls,cls:h.cls,text:h.text});h.node="string"==typeof h.node?d(h.node):h.node,h.node.each(function(a){var b=h.node[0].pop=d(i);c.cfg.closable||b.all("a").remove(),c._bind(b,a,h.offset),c._position(b,a,h.offset),e.append(b),c.pops.push(b)})}}),d("body").append(e)},_position:function(a,b,c){a.css({top:b.offset().top+c[0],left:b.offset().left+c[1]})},_bind:function(a,b,c){var e=this;this.cfg.closable&&a.all("a").on("click",function(){e.close(a)}),this.cfg.scrollable&&d(window).on("scroll",function(){e._position(a,b,c)})},close:function(b){b?b.remove():this.pops.length>0&&a.each(this.pops,function(a){a.remove()}),this.fire("close")}}),c},{requires:["node","event"]});